<!DOCTYPE html>
<html>
      <head>
       <meta charset="utf-8">
       <title>Chatbot</title>
       <style>
         body {
            font-family: Arial;
            margin-top: 0px;
            margin-bottom: 0px;
         }
         .send-button {
            background-color: rgb(25, 135, 84);
            color: white;
            padding: 12px 20px;
            margin-left: 10px;
            border: none;
            border-radius: 10px;
            cursor:pointer;
            font-size: 15px;

         }
         .chat-input {
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid black;
            font-size: 15px;
            flex-grow: 1;
         }
         .chat-input-container {
            display: flex;
            margin-bottom: 60px;

         }
         .app-cointainer {
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 100vh; 
            display: flex;
            flex-direction: column; 
         }
         .chat-message-user {
            display: flex;
            justify-content: end;
            margin-bottom: 20px;
            align-items: start; 
         }
         .chat-message-text {
            background:rgb(238, 238, 238);
            padding:15px 20px;
            border-radius: 10px;
            margin-right: 10px;
            margin-left: 10px;
            max-width: 300px;
         }
         .chat-message-robot {
            display: flex;
            justify-content: start;
            margin-bottom: 20px;
            align-items: start;
            
         }
         .chat-message-profile {
            width: 45px;
         }
         .chat-messages-cointainer {
            flex-grow: 1;
            overflow: scroll;
            margin-top: 20px;
            scrollbar-width: none;

         }
       </style>
      </head>
      
      <body>
         <div class="js-container"></div>

         <script src="https://unpkg.com/supersimpledev/react.js"></script>
         <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
         <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>
         <script src="https://unpkg.com/supersimpledev/babel.js"></script>
         
         <script type="text/babel">
         function ChatInput({chatMessages, setChatMessages}) { 
            const[inputText,setInputText]= React.useState('');
            function saveInputText(event){
             setInputText (event.target.value);
            }
            function sendMessage(){
               const newChatMessages =[
                         ...chatMessages,
                        {
                           message: inputText,
                           sender: 'user',
                           id: crypto.randomUUID()
                        } 
                     
                 ];    
               setChatMessages(newChatMessages);

                  const response = Chatbot.getResponse(inputText);
                     setChatMessages(
                     [
                        ...newChatMessages, 
                        {
                           message: response,
                           sender: 'robot',
                           id: crypto.randomUUID()
                        } 
                     ]

                  );
                   
                  setInputText('');
            }
            return (
               <div className="chat-input-container"> 
                  <input 
                     placeholder="Send a message to Chatbot" 
                     size="30" 
                     onChange={saveInputText}
                     value={inputText} 
                     className="chat-input"  
                  /> 
                  <button    
                    onClick={sendMessage}
                    className="send-button"   
                  >Send
                  </button>
               </div>
            );
         }  

         function ChatMessage({message,sender}) {
                  //const message = props.message;
                  //const sender = props.sender;
                  //const {message,sender}= props;
                  /* if ( sender === 'user'){
                  return (
                     <div>
                        {message}
                        <img src="user.png" width="50"/> 

                     </div>
                  );
                  } 
                  */

                     return (
                        <div className={
                           sender=== 'user' 
                           ? 'chat-message-user'
                           : 'chat-message-robot'
                           }>  
                           {sender === "robot" && (
                              <img src="robot.png" 
                              className="chat-message-profile"/>
                           )}
                           <div className="chat-message-text">
                             {message} 
                           </div>
                           {sender === "user" && (
                              <img src="user.png"   
                              className="chat-message-profile"/>
                           )}
                        </div>
                     );
            } 

           function ChatMessages({chatMessages}){
               const chatMessagesRef = React.useRef
                (null);
               React.useEffect(()=>{
                  const containerElem = chatMessagesRef.current;
                  if (containerElem) {
                     containerElem.scrollTop = containerElem.scrollHeight;
                  }
                  },[chatMessages]);
               return (
                        <div className="chat-messages-cointainer"
                        ref={chatMessagesRef}>  
                            {chatMessages.map((chatMessage) => {
                                 return(
                                    <ChatMessage 
                                       message = {chatMessage.message}
                                       sender = {chatMessage.sender} 
                                       key = {chatMessage.id} 
                                    />
                                 );
                              })
                            }
                        </div>
                      ); 
            }
            function App(){
                  const [chatMessages, setChatMessages]= React.useState([
                  {
                     message: 'hello chatbot',
                     sender: 'user',
                     id: 'id1'
                     
                  },
                  {
                     message: 'Hello! How can I help you?',
                     sender: 'robot',
                     id: 'id2'
                  },
                  {
                     message: "Can you get me today's date?" ,
                     sender: 'user',
                     id: 'id3'
                  },
                  {
                     message: "Sure! Today's date is 24/02/2026",
                     sender: 'robot',
                     id: 'id4'
                  },
               ]);
                  // const [chatMessages, setChatMessages] = array;
                  // const chatMessages = array[0]; 
                  // const setChatMessages = array[1]; 
               
            
               return (  
                  <div className="app-cointainer">
                    
                     <ChatMessages 
                     chatMessages={chatMessages}
                     setChatMessages={setChatMessages} 
                     /> 

                     <ChatInput 
                     chatMessages={chatMessages}
                     setChatMessages={setChatMessages}
                     />
                  </div> 
               );
            }
            const container = document.querySelector('.js-container');
            ReactDOM.createRoot(container).render(<App />);
         </script>
         
      </body>
</html> 